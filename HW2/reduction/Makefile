default:HW2

CC = icc
CFLAGS = -O3 -xAVX -qopt-report-phase=vec -openmp
CLIBS = -openmp

HW2:pi_omp.o 
	$(CC) $(CLIBS) pi_omp.o -o HW2

pi_omp.o:pi_omp.c
	$(CC) $(CFLAGS) -c pi_omp.c -o pi_omp.o

serial:pi.o
	$(CC) $(CFLAGS) pi.o -o pi

pi.o:pi_serial.c
	$(CC) $(CFLAGS) -c pi_serial.c -o pi.o

clean:
	rm -rf ./*.o ./*.optrpt HW2 pi

run:
	./HW2 100 100 100 100 100 100 100 100 100 100 >output_1e2.log
	./HW2 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 >output_1e4.log
	./HW2 1000000 1000000 1000000 1000000 1000000 1000000 1000000 1000000 1000000 1000000 >output_1e6.log
	./HW2 100000000 100000000 100000000 100000000 100000000 100000000 100000000 100000000 100000000 100000000 >output_1e8.log
	./HW2 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 >output_1e9.log
	./HW2 2000000000 2000000000 2000000000 2000000000 2000000000 2000000000 2000000000 2000000000 2000000000 2000000000 >output_2e9.log

run_serial:
	./pi 100 100 100 100 100 100 100 100 100 100 >output_s_1e2.log
	./pi 10000 10000 10000 10000 10000 10000 10000 10000 10000 10000 >output_s_1e4.log
	./pi 1000000 1000000 1000000 1000000 1000000 1000000 1000000 1000000 1000000 1000000 >output_s_1e6.log
	./pi 100000000 100000000 100000000 100000000 100000000 100000000 100000000 100000000 100000000 100000000 >output_s_1e8.log
	./pi 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 >output_s_1e9.log
	./pi 2000000000 2000000000 2000000000 2000000000 2000000000 2000000000 2000000000 2000000000 2000000000 2000000000 >output_s_2e9.log
